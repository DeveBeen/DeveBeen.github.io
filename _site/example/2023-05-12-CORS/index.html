<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v9.1.6 <https://hydejack.com/>
-->







<head>
  




  <meta name="robots" content="noindex">



  
    
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>CORS란? | Dev Been</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="CORS란?" />
<meta name="author" content="<firstname> <lastname>" />
<meta property="og:locale" content="en" />
<meta name="description" content="CORS가 무엇인지 알아보고 해결 방안을 생각해보자." />
<meta property="og:description" content="CORS가 무엇인지 알아보고 해결 방안을 생각해보자." />
<link rel="canonical" href="http://localhost:4000/example/2023-05-12-CORS/" />
<meta property="og:url" content="http://localhost:4000/example/2023-05-12-CORS/" />
<meta property="og:site_name" content="Dev Been" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-05-12T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CORS란?" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"<firstname> <lastname>"},"dateModified":"2023-05-27T12:27:14+09:00","datePublished":"2023-05-12T00:00:00+09:00","description":"CORS가 무엇인지 알아보고 해결 방안을 생각해보자.","headline":"CORS란?","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/example/2023-05-12-CORS/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/img/logo.png"},"name":"<firstname> <lastname>"},"url":"http://localhost:4000/example/2023-05-12-CORS/"}</script>
<!-- End Jekyll SEO tag -->


  

  



  <meta name="theme-color" content="rgb(25,55,71)">


<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">

<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Dev Been">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<meta name="application-name" content="Dev Been">

<meta name="generator" content="Hydejack v9.1.6" />


<link rel="alternate" href="http://localhost:4000/example/2023-05-12-CORS/" hreflang="en">

<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Dev Been" />


<link rel="shortcut icon"    href="/assets/icons/favicon.ico">
<link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png">

<link rel="manifest" href="/assets/site.webmanifest">

<link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com">



<link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG">






<script>!function(r,c){"use strict";function a(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=c.createElement("script"),e=(n.src=e,t&&a(n,"load",t,{once:!0}),c.scripts[0]);return e.parentNode.insertBefore(n,e),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=c.createElement("script");function o(){r._loaded=!0,t&&a(n,"load",t,{once:!0});var e=c.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():a(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){a(c.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}}(window,document);
!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);
!function(w) {
  w._baseURL = '/';
  w._publicPath = '/assets/js/';
  w._noPushState = false;
  w._noDrawer = false;
  w._noNavbar = false;
  w._noToc = false;
  w._noSearch = false;
  w._search = {
    DATA_URL: '/assets/sitedata.json?no-cache',
    STORAGE_KEY: 'mini-search/',
    INDEX_KEY: 'index--2023-05-27T16:49:48+09:00',
  };
  w._clapButton = true;
}(window);</script>


<script async src="/assets/bower_components/MathJax/es5/tex-mml-chtml.js" id="_MathJax"></script>


<!--[if gt IE 8]><!---->

  




<link rel="stylesheet" href="/assets/css/hydejack-9.1.6.css" id="_stylePreload">
<link rel="stylesheet" href="/assets/icomoon/style.css" id="_iconsPreload">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap" id="_fontsPreload">



  <style id="_pageStyle">

html{--accent-color: rgb(79,177,186);--accent-color-faded: rgba(79, 177, 186, 0.5);--accent-color-highlight: rgba(79, 177, 186, 0.1);--accent-color-darkened: #409ba3;--theme-color: rgb(25,55,71)}
</style>


<!--<![endif]-->




</head>

<body class="no-break-layout">
  


<hy-push-state
  id="_pushState"
  replace-selector="#_main"
  link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)"
  script-selector="script"
  duration="500"
  hashchange
>
  
  
  <div id="_navbar" class="navbar fixed-top">
  <div class="content">
    <span class="sr-only">Jump to:</span>
    <div class="nav-btn-bar">
      <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened">
        <span class="sr-only">Navigation</span>
        <span class="icon-menu"></span>
      </a>
      <div class="nav-span"></div>
    </div>
  </div>
</div>
<hr class="sr-only" hidden />

  <main
  id="_main"
  class="content layout-post"
  role="main"
>
  <nav id="breadcrumbs" class="screen-only"><ul>
  
  
    <li><a href="/">home</a></li>
    
      <li>
        
          <span>/</span>
          
          
          <a href="/example/">example</a>
        
      </li>
    
      <li>
        
          <span>/</span>
          <span>2023-05-12-CORS</span>
        
      </li>
    
  
</ul></nav>
  










<article id="post-example-CORS" class="page post mb6" role="article">
  <header>
    <h1 class="post-title flip-project-title">
      
        CORS란?
      
    </h1>

    <div class="post-date">
      
      <span class="ellipsis mr1">
        <time datetime="2023-05-12T00:00:00+09:00">12 May 2023</time> in <a href="/example/" class="flip-title">Example</a> 
      </span>
      
        
          
          
          
            
            
            <span class="ellipsis" data-tippy-content="Last modified at: 27 May 2023">
              <span class="sr-only">Last modified at:</span>
              <span class="icon-history"></span>
              <time datetime="2023-05-27T12:27:14+09:00">2023-05-27</time>
            </span>
          
        
      
    </div>

    
    

    



  
    <p class="note-sm" >
      CORS가 무엇인지 알아보고 해결 방안을 생각해보자.

    </p>
  


  </header>

  
    <hr />

<h2 id="1-cors란">1. CORS란?</h2>
<ul>
  <li>CORS(Cross-Origin Resource Sharing)는 영단어 그대로 해석하면 “교차 출처 리소스 공유”로 추가 HTTP 헤더를 사용하여, 한 출처에서 실행 중인 웹 애플리케이션이 다른 출처의 선택한 자원에 접근할 수 있는 권한을 부여하도록 브라우저에 알려주는 체제이다.</li>
  <li>즉, <a href="#단어정리">한 출처(origin)</a>에서 실행되고 있는 웹 애플리케이션이 <a href="#단어정리">다른 출처(cross-origin)</a>에 원하는 리소스 접근권한을 알려주는 메커니즘이다.</li>
</ul>

<p><img src="https://hanamon.kr/wp-content/uploads/2021/09/CORS.png" alt="image" /></p>

<hr />

<h2 id="2-정책">2. 정책</h2>
<ul>
  <li>HTTP 요청에 대해서 HTML은 Cross-Origin 정책을 따르기 때문에 기본적으로 Cross-Origin 요청이 가능하다. 예를들어 HTML에서 link 태그에서 다른 origin의 css 등의 리소스에 접근하는 것이 가능하고, img 태그에서 다른 jpg, png 등의 리소스에 접근하는 것이 가능하다.</li>
  <li>하지만 예외적으로 script 태그 내 HTTP 요청에 대하여는 보안상 이유로 Same-Origin 정책을 따르기에 Cross-Origin 요청이 불가능하다.</li>
</ul>

<hr />

<h2 id="3-사용처-보안상-문제">3. 사용처? 보안상 문제?</h2>
<ul>
  <li>CORS는 그러면 보안상의 문제는 없는지?, 왜 사용하는지? 라는 의문이 들 수도 있다고 생각한다. 그러기 위해서는 먼저 SOP(동일 출처 정책)을 이해해야 한다.</li>
  <li>SPO는 브라우저의 보안상 만들어졌는다. 우리 브라우저는 <a href="#단어정리">능동적 공격</a>, <a href="#단어정리">수동적 공격</a>을 받을 수 있다. 이때 서로 다른 사이트 간에 통신이 이루어지는 부분에서 공격을 받을 수 있고 이는 보안 문제로 이어지기에 웹 브라우저는 SPO라는 정책으로 다른 사이트 간에 통신인 교차 출처를 막아 보안 문제를 해결했다.</li>
  <li>이러한 정책은 보안 문제는 해결했지만 결국 교차 출처가 불가능해지기에 사이트 간 데이터 공유가 어려워져 HTTP 요청을 통해 교차 출처를 통해 데이터 공유가 가능하게 하는 CORS를 사용하기 시작했다.</li>
</ul>

<hr />

<h2 id="4-cors-시나리오">4. CORS 시나리오</h2>
<ul>
  <li>CORS라는 정책은 강력하기 때문에 CORS 이슈가 많이 등장할 수 밖에 없다. 즉, 안전성은 보장 받았지만 그만큼 까다로워 정책 위반 ERROR가 많이 발생한다는 것이다.</li>
  <li>이를 해결하기 위해 우리는 CORS의 동작 시나리오를 살펴볼 필요가 있다.</li>
  <li>CORS의 동작 시나리오는 아래와 같이 크게 3가지로 분류할 수 있다.</li>
</ul>

<ol>
  <li>간단한 요청(Simple Request) : 특정 조건을 만족하는 요청의 경우에는 허락 없이도 다른 출처에 HTTP 요청을 보낼 수 있다.</li>
  <li>사전 점검 요청 (Preflight Request) : 브라우저는 실제 요청 전 preflight라는 HTTP 사전 요청을 진행 후 사전 요청이 가능하면 실제 HTTP 요청을 보낸다.</li>
  <li>인증 정보를 포함한 요청(Credentialed Request) : 말 그대로 요청 시에 인증 정보를 보관한 헤더와 같이 요청하여 교차 출처가 가능하게 하는 요청 시나리오다.</li>
</ol>

<hr />

<h2 id="5-preflight가-왜-필요한가">5. preflight가 왜 필요한가?</h2>
<ul>
  <li>CORS 문제를 인식하지 못하는 서버를 위해서 preflight가 필요하다. 예를 들어 preflight가 없는 상황에서 교차 출처를 서버에 요청하면 서버는 CORS 설정이 없기 때문에 요구한 대로 정보를 그대로 가져온 후에 브라우저는 교차 출처 리소스라는 응답을 받기에 뒤늦게 브라우저가 Error를 띄워버려도 DB에서 이미 데이터가 증발했을 수도 있다.</li>
</ul>

<p>[Preflight가 없을 때]
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fc8zxWZ%2FbtrgOulF1h9%2F2kw1reQOx4zJhDl7ogodAK%2Fimg.png" alt="image" /></p>

<p>[Preflight가 있을 때]
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FU2BMh%2FbtrgXhq6z51%2FHS4xNjJLJm1agjfYYWGAg1%2Fimg.png" alt="image" /></p>

<h1 id="단어정리">단어정리</h1>
<ul>
  <li>origin : 특정페이지에 접근할 때 사용되는 URL의 Scheme(프로토콜), host(도메인), 포트를 말한다.</li>
  <li>cross-origin : origin과 Scheme(프로토콜), host(도메인), 포트 중 하나라도 다른 URL을 말한다.</li>
  <li>능동적 공격 : 해커가 브라우저에 직접 침투하여 행동하여 공격하는 것을 말한다.</li>
  <li>수동적 공격 : 해커가 브라우저에 함정을 파둬 사용자 행동을 통해 공격하는 것을 말한다.</li>
</ul>

  
</article>



  <hr class="dingbat related mb6" />






  
     


  <aside class="about related mt4 mb4" role="complementary">
    
    

<div class="author mt4">
  

  
    


<img
  
    src="https://via.placeholder.com/128x128"
    srcset="https://via.placeholder.com/128x128 1x,https://via.placeholder.com/256x256 2x"
    
  
  alt="<firstname> <lastname>"
  class="avatar"
  
  width="120"
  height="120"
  loading="lazy"
/>

  

  
  
  <h2  class="page-title hr-bottom">
    About
  </h2>

  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

<p>Open <code class="language-plaintext highlighter-rouge">_data/authors.yml</code> to edit this text.</p>


  <div class="sidebar-social">
    <span class="sr-only">Social:</span>
<ul>
  
    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://twitter.com/<username>" title="Twitter" class="no-mark-external">
      <span class="icon-twitter"></span>
      <span class="sr-only">Twitter</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://github.com/<username>" title="GitHub" class="no-mark-external">
      <span class="icon-github"></span>
      <span class="sr-only">GitHub</span>
    </a>
  </li>


    
  
</ul>

  </div>
</div>

  </aside>


  

  
  

  
    


  <aside class="related mb4" role="complementary">  <h2 class="hr-bottom">Related Posts</h2>  <ul class="related-posts">                  <li class="h4">  <a href="/example/2023-05-26-JS-Operaiting/" class="flip-title"><span>JavaScript의 동작원리</span></a>  <time class="faded fine" datetime="2023-05-26T00:00:00+09:00">26 May 2023</time></li>                        <li class="h4">  <a href="/example/2023-05-14-DOM/" class="flip-title"><span>DOM이란?</span></a>  <time class="faded fine" datetime="2023-05-14T00:00:00+09:00">14 May 2023</time></li>                        <li class="h4">  <a href="/example/2023-05-13-PWA/" class="flip-title"><span>PWA란?</span></a>  <time class="faded fine" datetime="2023-05-13T00:00:00+09:00">13 May 2023</time></li>            </ul></aside>

  

  
  

  
    

  


  
<footer class="content" role="contentinfo">
  <hr/>
  
    <p><small class="copyright">© 2021. All rights reserved.
</small></p>
  
  
    <nav class="legal"><small>
    
      
      <a class="heading flip-title" href="/LICENSE/">LICENSE</a>
      |
    
      
      <a class="heading flip-title" href="/NOTICE/">NOTICE</a>
      |
    
      
      <a class="heading flip-title" href="/CHANGELOG/">CHANGELOG</a>
      
    
    </small></nav>
  
    <p><small>Powered by <a class="external" href="https://hydejack.com/">Hydejack</a> v<span id="_version">9.1.6</span></small></p>
  <hr class="sr-only"/>
</footer>


</main>

  <hy-drawer
  id="_drawer"
  class=""
  side="left"
  threshold="10"
  noscroll
  
>
  <header id="_sidebar" class="sidebar" role="banner">
    




<div class="sidebar-bg sidebar-overlay" style="background-color:rgb(25,55,71);background-image:url(/assets/img/sidebar-bg.jpg)"></div>

    <div class="sidebar-sticky">
  <div class="sidebar-about">
    
      <a class="no-hover" href="/" tabindex="-1">
        <img src="/assets/img/logo.png" class="avatar" alt="Dev Been" width="120" height="120" loading="lazy" />
      </a>
    
    <a class="sidebar-title" href="/"><h2 class="h1">Dev Been</h2></a>
    
    
      <p class="">
        Developer HappyBeen Blog

      </p>
    
  </div>

  <nav class="sidebar-nav heading" role="navigation">
    <span class="sr-only">Navigation:</span>
<ul>
  
    
      
      <li>
        <a
          id="_drawer--opened"
          href="/example/"
          class="sidebar-nav-item "
          
        >
          Example
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/docs/"
          class="sidebar-nav-item "
          
        >
          Documentation
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/about/"
          class="sidebar-nav-item "
          
        >
          About
        </a>
      </li>
    
  
</ul>

  </nav>

  
  <div class="sidebar-social">
    <span class="sr-only">Social:</span>
<ul>
  
    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://twitter.com/<username>" title="Twitter" class="no-mark-external">
      <span class="icon-twitter"></span>
      <span class="sr-only">Twitter</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://github.com/<username>" title="GitHub" class="no-mark-external">
      <span class="icon-github"></span>
      <span class="sr-only">GitHub</span>
    </a>
  </li>


    
  
</ul>

  </div>
</div>
  </header>
</hy-drawer>
<hr class="sr-only" hidden />

</hy-push-state>


  <!--[if gt IE 10]><!---->
  <script nomodule>!function(){var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())}();
</script>
  <script src="/assets/js/hydejack-9.1.6.js" type="module"></script>
  <script src="/assets/js/LEGACY-hydejack-9.1.6.js" nomodule defer></script>
  

  

<!--<![endif]-->
  <!-- <script>
  document.querySelector('hy-push-state').setAttribute('prefetch', '');

  document.querySelectorAll('.sidebar a[href^="/"]').forEach(function (el) { 
    el.addEventListener('click', function (e) {
      if (el.pathname === window.location.pathname) {
        e.preventDefault();
        e.stopPropagation();
        document.querySelector('hy-drawer').close();
      }
    });
  });
</script> -->

<!--
Code for integrating CloudFlare's email protection with Hydejack's single page app loading.
-->
<script>
  document.getElementById('_pushState').addEventListener('hy-push-state-after', function (e) {
    function e(e){
      (console.error?console.error:console.log).call(console,e)
    }

    function t(e){
      return l.innerHTML='<a href="'+e.replace(/"/g,"&quot;")+'"></a>',l.childNodes[0].getAttribute("href")
    }

    function r(e,t){
      var r=e.substr(t,2);return parseInt(r,16)
    }

    function n(e,n){
      for(var o="",c=r(e,n),a=n+2;a<e.length;a+=2){
        var l=r(e,a)^c;
        o+=String.fromCharCode(l)
      }
      return t(o)
    }

    var o="/cdn-cgi/l/email-protection#",
        c=".__cf_email__",
        a="data-cfemail",
        l=document.createElement("div");

    !function(){
      for(var t=document.getElementsByTagName("a"),r=0;r<t.length;r++)
        try{
          var c=t[r],a=c.href.indexOf(o);
          a>-1&&(c.href="mailto:"+n(c.href,a+o.length))
        }catch(t){
          e(t)
        }
    }(),
    function(){
      for(var t=document.querySelectorAll(c),r=0;r<t.length;r++)
        try{
          var o=t[r],l=n(o.getAttribute(a),0),i=document.createTextNode(l);
          o.parentNode.replaceChild(i,o)
        }catch(t){
          e(t)
        }
    }()
  });
</script>





<div hidden>
  
  <h2 class="sr-only">Templates (for web app):</h2>

  <template id="_animation-template">
  <div class="animation-main fixed-top">
    <nav id="breadcrumbs" class="screen-only"><ul>
  
  
</ul></nav>
    <div class="content">
      <div class="page"></div>
    </div>
  </div>
</template>

  <template id="_loading-template">
  <div class="loading nav-btn fr">
    <span class="sr-only">Loading…</span>
    <span class="icon-cog"></span>
  </div>
</template>

  <template id="_error-template">
  <div class="page">
    <h1 class="page-title">Error</h1>
    
    
    <p class="lead">
      Sorry, an error occurred while loading <a class="this-link" href=""></a>.

    </p>
  </div>
</template>

  <template id="_permalink-template">
  <a href="#" class="permalink">
    <span class="sr-only">Permalink</span>
    <span class="content-hash"></span>
  </a>
</template>

</div>


</body>
</html>
